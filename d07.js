const input = `88223 818\n66JQ9 398\n6T9AT 311\n53TT3 43\nJ6266 762\n5TTAA 647\n44JTT 779\nT4T66 496\n6AAA3 383\n69K4Q 232\n55KA5 436\n666JJ 479\n75J85 835\n27379 323\n592Q3 565\n33777 438\n75224 136\n2QQK2 116\nJJQK9 219\n9Q77J 46\n68686 177\n7A7AA 336\nJ4K3A 582\n46QA9 11\n5AJ85 712\nAJAJ4 264\nAK2AA 756\nK49KK 597\n9J882 678\n28QQ8 405\n93333 401\nKJTQJ 281\nK78Q4 941\nT8J56 377\nQ6TQT 440\nT44T4 792\n6KK66 7\n2JT22 144\nK6656 665\n6JQ4K 87\n5J4JA 419\n3A2J4 325\n47T47 291\n3J7Q3 190\n4A527 234\n223K2 917\n233J3 912\n844QQ 268\nTKTJK 125\n22298 62\nT6J59 258\n99K69 896\n8J878 834\nJ5655 757\n4J26T 255\n4K3K5 448\n229J9 889\n22372 702\n6Q73T 832\nQ9892 919\nQJQ7Q 898\nJTTT5 173\n959J9 543\nAAAA5 858\n3Q5Q6 159\n23372 39\n453AK 572\nA6A82 410\nQ88Q8 241\nJ675A 348\nKQQ2Q 643\nKJK52 981\nA9989 631\n33633 64\n44TJA 274\nA49A4 59\nAKAKA 864\n4333K 184\n8T843 238\n54594 429\nJ222J 78\n5Q655 374\n5Q8KA 147\nJ8Q2J 278\n29293 387\nT8TT4 15\nT7K36 481\n43776 782\n24292 369\n7K3Q2 551\n42T2T 495\n5Q5QQ 761\nQKKKK 312\n22J9A 948\nT552T 657\n75Q77 45\n35296 931\n46266 157\n9J4KK 973\nA4A77 269\n36T6T 235\n44483 386\n29452 924\n66Q66 723\n4TT86 717\n544AK 956\nQQQ9Q 75\nJJ989 708\nAKKA9 842\n2777K 519\nQ569A 831\n65838 996\n9AAA9 128\nQ722Q 95\nKJ2KK 807\n8TTKK 989\n393J9 306\n44J44 263\n85335 70\n54499 500\nKKJ44 462\nQ44K4 636\nQ3392 870\n8J896 540\n8QQ63 485\n37955 209\n6K5K8 35\n58JKT 307\n66QQ7 993\nQ4K98 937\nK2J42 583\n45333 965\nTAJ75 74\nT548J 114\nJ5599 111\n9J557 79\n49JK3 669\nT9T9T 613\nJ5TK6 69\nTQTJT 223\n98746 560\n3QQ33 271\n7A3QK 692\nAQ347 32\n653J9 638\nJ8J48 635\n94449 873\n44449 957\nT4TTT 224\n949T4 695\nQ8Q4Q 376\n75QJ5 130\nK8K68 988\n84J45 441\n82577 443\nT4383 812\n973T2 1000\nTKK4J 781\nK6J77 911\n8Q383 491\n333AJ 230\n53555 492\n68666 183\n666Q5 178\n26KKK 379\n77TTQ 978\n92992 907\nT2562 65\nK7J3K 324\n67365 400\n2222J 331\nAA2AA 933\n8AAAJ 790\n47474 105\n48T43 203\nA5AJT 736\n9J6TQ 162\nTTTT6 700\n97987 851\nK5788 439\nQ9399 591\n34976 406\n3434T 486\n6A66J 22\n9J9TA 822\nQQ66J 632\n77755 590\n5564A 345\nJ5A75 186\n29785 828\n88844 882\n38KK6 955\n66TTT 349\n78TKK 969\n46344 881\n7TT77 561\n6JTTQ 997\nQA8QA 921\n8Q2T4 625\n67T4A 403\n436K5 214\n6K7T8 26\n8A98K 197\nT3K84 141\n5J454 344\n74Q69 642\nKJ555 20\n5A4A8 129\nQ4A5J 510\nK2KK5 126\nT6686 853\n7Q774 867\n99696 459\n7Q3TA 770\n9J966 117\nT4T5T 494\n828K2 236\n54726 38\n88T82 704\n73977 502\n535A5 294\nK9K5K 418\n8TT9J 115\nQ2376 480\n5A9T7 257\nKK9KK 673\n33KK3 427\n4A575 974\nJT94J 515\n999A9 83\nQ342A 938\n8JKAJ 574\n5664J 775\n642A4 101\n33K28 916\nK28JK 176\nQQQQK 967\n4A4Q4 616\nT578T 552\n46474 174\nQQ83J 837\n22287 23\nJJJJJ 725\nKK55K 120\nAAQA5 555\n72737 37\nQ82JQ 518\n77667 464\nQJAQA 367\nK323K 52\n777T4 751\n74777 452\n839QJ 124\n8Q989 326\n5K5JA 711\n777J7 396\n46AJT 767\n88669 637\nJTTKQ 34\nJKK9K 251\n66226 163\nJ3343 605\n998J5 534\nAT72K 950\n7J757 608\n84TT4 460\n99955 315\nTK5KA 60\nT82JQ 991\n46866 661\nT8TTT 19\n25K65 577\nQK3J6 284\n7A977 390\nKKKK2 774\nJ97A7 143\nQK545 655\nAK4T3 454\n374K9 300\nAJATT 614\n96KA7 819\n5525A 253\nA995A 61\n66Q6Q 36\n4J253 282\n3JK9Q 385\n44JJ4 196\nKKKKJ 166\nK8KK8 299\nJ9979 179\n93999 738\n47T3K 726\nA6J45 182\nJT322 421\n35J36 545\n838TK 434\n6AK6A 838\n4JT44 929\nJ5955 473\nK4A47 611\nQK472 40\nAJTTJ 106\n4J9TT 82\n4QQ4Q 316\n38KA8 836\n96K8A 586\nJ286T 318\n2JJ77 778\n4344K 528\n866AA 215\n68676 56\n934J3 563\n44J45 355\n4J443 804\n5QQ58 185\n844AK 53\n3T333 909\nTJ2K5 860\nAAQ3A 395\n66646 272\n54T8K 676\nA4Q25 67\n94J49 696\n42KK2 267\nKQK8T 985\n4QJ29 559\n83686 244\n53292 940\nQK6KK 503\n78777 660\nJ4424 194\n8Q46Q 699\n72776 368\nKA553 926\n44454 627\n52599 86\n242A2 337\n49955 467\nQJAQK 847\nJ22AJ 259\n2QQ2Q 228\nK33KK 833\n95559 900\n262AJ 250\n9AQ34 604\n8Q99Q 788\nJAQT9 908\nQ9432 47\nT3346 619\n8K97T 30\nJ62J6 240\n28888 302\nK96K9 320\n9TQAT 960\nJ9877 612\n88878 556\n6QQ5T 732\n6JA89 681\n3JJ5T 435\nQQ2K7 77\nATTTT 283\nQKJQ8 629\n53353 276\nA2A33 805\n383AJ 797\nJ684K 169\n44J4A 164\nKKK5K 392\n7988J 24\nQ5446 885\n7777A 713\n24386 839\nJ77A7 537\nKTA7Q 16\n6TTJJ 677\n9Q93Q 523\n22322 280\n2QK58 984\n65795 6\nT9TTT 763\n66A67 58\nKJ994 743\nQ7KQQ 222\n4A424 270\nKQKQK 694\n843Q4 287\n5QQAQ 330\nQ4449 593\nQQQ4J 131\n2222K 132\n28287 402\nJ46A4 707\n24242 982\n6686J 733\n8T9Q8 175\n45J3Q 442\n6Q48J 444\n3TTQ3 737\n4TT4T 127\n5555A 399\nAKT29 872\nTTT7J 340\nJ44QQ 89\n57A3Q 453\nQJAJQ 682\n7JQ74 450\nJ55Q2 342\n59267 773\n8J884 652\n33383 456\nK68JJ 600\n6JJA4 156\nT8T8J 771\n62222 942\n92999 947\n55886 946\n75A77 601\n3QK54 945\nA2686 531\n39Q38 687\nTKKTT 360\n8886K 339\n7774A 202\nT2222 798\n3786T 171\n547A6 623\n22T2T 170\nT2688 201\nKJ7A4 902\n9322T 922\n74Q6A 666\nJ72T7 511\n44A44 72\nQ776Q 411\n4K4K8 588\nK43JJ 760\nAAAA6 714\n52J55 8\n3K94A 976\nAKJTQ 729\n65J66 94\n9KKK3 445\n6ATJT 876\nT2529 432\n68A79 397\n82J4Q 566\n53557 472\n83383 356\nAAAQA 380\nKTKK5 357\n5T24J 746\n6777J 289\nTK9K9 843\n44744 213\n3KTKT 728\nJ739A 659\nT33JJ 928\n84QJQ 952\nKKK67 378\n97979 954\nK52T4 332\n75QA6 863\nATTK2 603\n33Q33 207\n4AJ24 9\n5TTK5 949\nTTJ9T 663\n77277 645\n434QQ 364\nJJJ8J 527\nT479Q 706\n7A77K 413\nTK486 640\nKKJ59 17\n799Q9 97\n33646 447\n2323J 477\nK2758 986\nT5TT5 547\n9956Q 609\nTK753 149\n87Q79 193\nJQQQQ 512\n44988 871\nAA4AA 789\nJ2564 347\n23J68 890\nKAAAT 684\nK9KTK 334\nTTTT3 857\n99899 783\n426J3 865\n8J288 689\n7QT8J 122\n73679 649\n653AQ 899\n9992T 544\n66TJ6 416\n382A9 252\n52J54 273\nJ665T 630\n82222 221\nTT3T3 262\n44748 927\nT75KQ 85\n44554 587\n4866J 754\n47T6T 92\n899TT 4\n999JJ 576\n87898 868\n45T32 217\nJ54T4 977\nJAAJA 721\n43KJ3 883\n4888K 110\n5A544 546\nJ6783 220\n85956 63\n54334 137\nJ9384 688\n94429 249\nQQJA3 803\nAA66A 180\n99K9T 28\n535J5 607\n8AA88 341\n862K2 382\n8J888 314\n25282 796\n8J8J8 488\n88Q35 188\nJ99Q9 840\n5K832 475\n3333A 653\nA4A4J 539\n999T9 370\n77J73 310\nJJKKJ 964\nJ9856 584\n54J9K 727\n22777 231\n6Q274 469\nTTTTJ 408\n6J2Q2 33\nAJ867 484\n55J55 892\nK7593 971\n5AT5T 474\nA2KKA 113\n24222 906\n93J33 875\nQ43AJ 972\n88JT7 569\n5Q8K8 888\nJ7T53 747\n99986 29\n5JAA5 968\n97A75 468\nA5A58 449\n77455 44\n88T8A 820\n42732 455\n6A66A 575\n888KK 358\nTT966 780\n2KKTT 150\nQ5J5Q 718\n53J37 827\nA8J42 461\nK2863 548\n9TT99 216\n33343 802\nTTAAT 995\nK4T9J 786\nTKA39 785\nQQQQ3 766\n97Q7Q 903\nQJQ57 821\n92699 598\n49273 529\n2245J 731\nJ7826 701\n2K724 983\n88KJK 769\n55592 815\nQK72J 920\n3QQ29 446\nATTJT 650\nK93AA 303\nT63TT 507\n93993 810\n858J8 852\n2T5K9 165\n3TJ33 1\n93JTK 683\n999K9 672\nJ6663 628\n443T4 42\nQQKT7 407\nAA3AA 242\nK9223 624\nQAQTA 570\n39TJ3 490\n22332 54\n82274 848\n2549T 210\nK7J55 466\nJK3AT 285\nQ42AQ 50\n2KQTK 730\nT5A8T 71\n523JT 470\n8T4AQ 433\nTT3A6 664\n555Q5 793\n62227 932\nTT8J2 777\n5Q5TT 91\n83A33 388\n666J6 963\n2J68Q 415\n5TQ37 12\nJ8428 246\nJT7T9 953\n8K269 133\n755Q7 530\n8777A 962\nK55K5 394\n84828 195\n37246 679\n6796K 724\nQAA2A 844\nAT47Q 951\n57T5K 121\n35T85 227\n94TJ6 809\n4J6J6 685\nJ5545 138\nK653T 646\nT267Q 414\nJJ559 535\n3K59K 25\n5AA23 412\nAJAAK 465\nQ7Q77 595\n9A99J 722\n7QQQQ 3\nKTKKQ 536\nTTJJT 393\nT2K26 905\n4AQ4Q 894\n88885 740\nQAQ8Q 96\nAQQQA 516\n78877 748\n447AA 200\n42JQQ 617\n33J33 776\n88787 155\n2K688 734\nJ5K53 886\nQ88QQ 850\n266Q6 167\n8QQ84 644\nTTTJK 610\nK4936 958\n24K3A 698\n55T55 697\nQ5353 146\n339QQ 752\n9Q584 84\n2J822 497\nQ7T25 365\n57JTQ 140\nA847T 458\n82Q7T 80\n97779 293\n66K88 675\n66446 633\nT6KTT 934\n966J6 849\n22T53 854\n88AKK 514\nK5J58 305\n88222 298\n88K6J 526\n528Q8 936\nA2A3A 208\nK49A9 191\n4JJ47 319\n5J858 108\nJA345 425\n8T2Q6 715\nAA999 990\nQ96J9 879\n84J44 742\nA3A3J 806\nAATA8 557\nAJ77A 504\n36753 27\n65686 66\nJ76A9 279\n3T63T 913\n9ATJJ 568\nK64K4 580\n8888K 668\n6K9J6 134\n23533 431\n65656 705\nT3T43 979\n79899 48\nQQQKK 795\n7TA7T 709\nKQ627 409\n66669 265\nK8732 404\nK6663 992\nQJQJQ 765\n88383 855\nJT4TJ 944\n26QQ6 874\nKK6KK 501\n6K7K2 451\n3TAK7 772\nTTJ55 328\n6QJ66 424\n56577 428\n6T6T6 816\nJ9J2T 375\nJ66TT 923\nTK2JQ 602\nQT7T8 233\nQQ9Q9 381\n447KK 959\nAJ6AA 107\n679T5 895\n2J559 533\n9JKAQ 489\n84Q92 521\nKQT83 884\n66946 648\n329KT 198\n5588T 925\nTTTT5 99\n637JT 218\n9K4AJ 918\n7JT5T 914\n24966 513\n76J3Q 13\n74994 260\nQQQQ5 585\n777TJ 112\n24JJ2 286\nQ4Q77 88\n9A559 626\nA63JK 987\n7T776 719\n24A34 618\nJ2722 878\nT2TTT 327\n664QK 904\nA5663 160\nJ9Q65 187\nJ333K 457\n35355 476\n55757 558\nT3A48 856\nQQ445 261\n2JKK2 296\nQ74Q3 758\n5KJ5K 353\n22J24 651\n99366 256\nQ7Q59 172\nAA9JJ 2\n9999J 288\n77779 313\n394TA 247\nJ55Q5 532\nTTTTK 384\n68868 749\n56TJT 389\nJ555J 5\nT577J 304\nA7T96 290\n7T99A 391\nK7KK7 621\nKQT72 483\nJAAA2 846\n9QK26 710\n23233 750\nT33T2 352\n42444 351\n4224J 841\n574J5 31\nA744J 525\n484KJ 371\n44242 68\n97J26 482\nKK882 153\n32689 139\n429AK 755\nQ5382 102\n84Q88 487\n5J645 622\n99J34 361\n759QA 581\n88585 10\n4JT94 338\n75A44 14\n5557J 363\nKK244 522\n66636 277\n799T9 509\n37J93 142\nJ6522 359\n573KJ 98\n63TA3 90\nQQQ8Q 825\n549QQ 538\n99T39 498\nAA37A 830\nJJ9JQ 211\nQ2T88 799\nJA58K 346\n6TQ3T 297\n85385 720\nA5AA6 123\n75588 794\nQ7979 768\n57KQQ 366\n882J2 554\nT9K65 735\n8T787 550\nT5JJT 615\n22832 564\n96JT9 859\nQT22J 716\n8T6T6 335\nJ2474 541\nAT8AQ 578\nQ7QQ4 573\n56J7K 869\n46477 109\n68858 579\n74J78 961\nA8A8Q 641\n4AA44 662\nTTT56 791\n94292 229\nAAJ87 703\n4A6K6 901\n487T2 656\nJK626 800\n99996 998\n84448 520\n3QKT5 845\nQA4TA 517\nQQTTK 226\nK995K 596\n77393 76\n99JAA 437\n79K59 205\n9K22K 824\n8389A 741\n755TT 18\n77757 970\nA2777 634\nJ795Q 148\n24425 690\n7Q7Q3 81\n5TT89 471\n4Q223 243\nAAAK6 248\nQ6443 620\n58668 478\n5K26T 493\n66J46 999\n46348 745\n62KTK 930\nJK377 893\nQ6K98 119\n5T83K 542\n77332 658\n44K44 422\nK6K6J 606\n75357 199\n99946 980\n89989 372\n22J25 103\n47J47 814\nK7K77 667\n93883 670\n2QTT2 135\nQ693K 753\nA5JT9 237\n38KKJ 571\n66AAT 254\n36636 354\n9AT3J 417\n88899 212\nQQ3Q3 599\nJ265J 100\n55KAK 866\n57Q2A 654\n6T266 292\n954J2 245\n5TT65 671\n3T693 21\nATAT7 994\nK8777 51\n5JQ92 808\n95A75 343\n42K6Q 813\n4J4TK 880\n77768 266\n9J929 549\n653J5 592\nAAQKQ 275\n59956 877\n5A2J6 317\nJ9QT3 784\nQAQQQ 887\nKKK4K 301\nJ777J 499\nQQQ6Q 910\n88898 154\n4Q553 151\n88J98 189\n95J66 161\n87785 589\n628J4 935\n58Q67 362\n55522 430\n44555 817\nQT792 939\n85754 158\nTKKKK 861\nAAKK3 966\n56JT5 686\n77776 181\nK5553 49\n85855 508\n64444 862\n5TAQ8 739\n97KK7 118\n7J566 321\n99944 505\nTQTTQ 463\nK4528 680\n298K2 329\n66656 691\n55222 152\n9QTTT 891\n64KJ9 801\nQ7737 639\n73533 57\n55524 204\n95999 322\nTA7QT 423\nAAAKA 829\n66QJ7 55\n77353 897\n47A38 333\n88A77 192\n88T8Q 567\n74A68 308\n55556 811\n9AJ6K 975\nQQQ4Q 239\n37Q33 506\n737AJ 915\n222J9 420\n7755K 562\n4T7J4 93\nKJA84 168\n66463 693\nKATTT 674\nKT555 295\n8J459 206\n28882 426\nQ27K9 73\n53442 943\n96678 553\nK34T2 309\nA555A 104\nA7AK2 764\nJ8Q7Q 225\nTATT3 373\n63T48 594\n93933 759\n6Q78K 145\nKA29A 823\nAAJAA 744\n85A26 524\n7777K 350\nT6363 826\nJ333J 41\n55AA6 787`;\n

function inputToHands(input) {
  const hands = input.split('\n')
    .map(line => line.split(' '))
    .map(array => ({
      cards: array[0].split(''),
      bid: Number(array[1]),
    }));
  return hands;
}

const hands = inputToHands(input);

// Part 1
function getNbOccOfCard(card, cards) {
  return cards.filter(cardToCheck => cardToCheck == card).length;
}

function getNbOccOfEachCards(cards) {
  const getNbOccOfEachCards = new Map();
  for (const card of cards) {
    getNbOccOfEachCards.set(card, getNbOccOfCard(card, cards));
  }
  return getNbOccOfEachCards;
}

function getStrengthOfCards(cards) {
  const nbOccOfCards = getNbOccOfEachCards(cards);
  if (isPart2) {
    const nbJokers = nbOccOfCards.get('J') ?? 0;
    if (nbJokers == 5) return 6;
    nbOccOfCards.delete('J');
    // Jokers needs to be added to the label with the highest nb of occ
    let maxOcc = -Infinity;
    let cardMaxOcc;
    for (const [card, occ] of nbOccOfCards) {
      if (occ > maxOcc) {
        maxOcc = occ;
        cardMaxOcc = card;
      }
    }
    nbOccOfCards.set(cardMaxOcc, maxOcc + nbJokers);
  }
  // Five of a kind
  if (nbOccOfCards.size == 1) return 6;
  // Four of a kind
  if ([...nbOccOfCards.values()].some(v => v == 4)) return 5;
  // Full house (2 differents cards labels)
  if (nbOccOfCards.size == 2) return 4;
  // Three of a kind
  if ([...nbOccOfCards.values()].some(v => v == 3)) return 3;
  // Two pairs
  if (nbOccOfCards.size == 3) return 2;
  // One pair
  if ([...nbOccOfCards.values()].some(v => v == 2)) return 1;
  return 0;
}

function getLabelValue(card) {
  if (isPart2 && card == 'J') return 1;
  if (card == 'A') return 14;
  if (card == 'K') return 13;
  if (card == 'Q') return 12;
  if (card == 'J') return 11;
  if (card == 'T') return 10;
  return parseInt(card);
}

// return <0 , 0, >0
function compareLabelValue(card1, card2) {
  return getLabelValue(card1) - getLabelValue(card2);
}

function compareLabelValueOfCards(cards1, cards2) {
  for (let i = 0; i < cards1.length; i++) {
    const compare = compareLabelValue(cards1[i], cards2[i]);
    if (compare != 0) return compare;
  }
  return 0;
}

function compareStrengthOfCards(cards1, cards2) {
  return getStrengthOfCards(cards1) - getStrengthOfCards(cards2);
}

function compareCards(cards1, cards2) {
  const strength = compareStrengthOfCards(cards1, cards2);
  if (strength != 0) return strength
  return compareLabelValueOfCards(cards1, cards2);
}

let isPart2;
for (isPart2 of [false, true]) {
  hands.sort((hand1, hand2) => compareCards(hand1.cards, hand2.cards));

  let sum = 0;
  for (const [rank, {bid}] of hands.entries()) {
    sum += (rank + 1) * bid;
  }
  console.log(sum);
}